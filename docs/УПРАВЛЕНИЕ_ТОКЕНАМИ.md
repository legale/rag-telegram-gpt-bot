# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¢–æ–∫–µ–Ω–∞–º–∏ - –ö—Ä–∞—Ç–∫–∞—è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ —Ç–æ–∫–µ–Ω–∞–º–∏:

### üÜï –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ Telegram

1. **`/tokens`** - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
   ```
   üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤:
   
   –¢–µ–∫—É—â–µ–µ: 3,245
   –ú–∞–∫—Å–∏–º—É–º: 14,000
   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 23.18%
   
   ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞.
   ```

2. **`/reset`** - –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
   ```
   ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–±—Ä–æ—à–µ–Ω!
   ```

### ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å

–ë–æ—Ç —Ç–µ–ø–µ—Ä—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç**, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤.
–í—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:
```
‚ö†Ô∏è –ö–æ–Ω—Ç–µ–∫—Å—Ç –±—ã–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–æ—à–µ–Ω –∏–∑-–∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤.
```

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ .env

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```bash
# –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ—Å–±—Ä–æ—Å–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 14000)
MAX_CONTEXT_TOKENS=14000
```

**–î–ª—è —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π:**

| –ú–æ–¥–µ–ª—å | –õ–∏–º–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π MAX_CONTEXT_TOKENS |
|--------|----------------|----------------------------------|
| gpt-3.5-turbo | 16k | 14000 |
| gpt-4-turbo | 128k | 120000 |
| claude-3-sonnet | 200k | 190000 |

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/tokens`

### –°–±—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É—é
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `/reset`

### –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –º–æ–¥–µ–ª—å —Å –±–æ–ª—å—à–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)
1. –û—Ç–∫—Ä–æ–π—Ç–µ `.env`
2. –ò–∑–º–µ–Ω–∏—Ç–µ `MAX_CONTEXT_TOKENS=14000` –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

## –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env` —Ñ–∞–π–ª–∞:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞ (Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞:
poetry run python src/bot/tgbot.py run -vv
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–ª–∏–Ω–Ω—ã–º —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–º
```
–í—ã: /tokens
–ë–æ—Ç: üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤:
     –¢–µ–∫—É—â–µ–µ: 12,500
     –ú–∞–∫—Å–∏–º—É–º: 14,000
     –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 89.29%
     ‚ö†Ô∏è –ü—Ä–∏–±–ª–∏–∂–∞–µ—Ç–µ—Å—å –∫ –ª–∏–º–∏—Ç—É! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /reset –¥–ª—è —Å–±—Ä–æ—Å–∞.

–í—ã: /reset
–ë–æ—Ç: ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–±—Ä–æ—à–µ–Ω!
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å
```
–í—ã: –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ...
–ë–æ—Ç: ‚ö†Ô∏è –ö–æ–Ω—Ç–µ–∫—Å—Ç –±—ã–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–æ—à–µ–Ω –∏–∑-–∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤.
     
     [–û—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å...]
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç —á–∞—Å—Ç–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è?
- –£–≤–µ–ª–∏—á—å—Ç–µ `MAX_CONTEXT_TOKENS` –≤ `.env`
- –ò–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –º–æ–¥–µ–ª—å —Å –±–æ–ª—å—à–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (gpt-4-turbo)

### –•–æ—á—É –≤–∏–¥–µ—Ç—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞?
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª—å —Å –±–æ–ª—å—à–∏–º –æ–∫–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
```bash
# –í .env
OPENROUTER_MODEL=openai/gpt-4-turbo
MAX_CONTEXT_TOKENS=120000
```

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å?
–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/tokens` –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞.
